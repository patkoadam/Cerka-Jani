var ce=Object.create;var D=Object.defineProperty;var fe=Object.getOwnPropertyDescriptor;var me=Object.getOwnPropertyNames;var de=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var ge=(e,t)=>{for(var n in t)D(e,n,{get:t[n],enumerable:!0})},Q=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of me(t))!he.call(e,o)&&o!==n&&D(e,o,{get:()=>t[o],enumerable:!(s=fe(t,o))||s.enumerable});return e};var _=(e,t,n)=>(n=e!=null?ce(de(e)):{},Q(t||!e||!e.__esModule?D(n,"default",{value:e,enumerable:!0}):n,e)),ye=e=>Q(D({},"__esModule",{value:!0}),e);var Te={};ge(Te,{Deferred:()=>re,Head:()=>ne,Link:()=>se,WhenVisible:()=>ue,createInertiaApp:()=>q,router:()=>pe.router,useForm:()=>w,usePage:()=>ee,usePoll:()=>U,usePrefetch:()=>W,useRemember:()=>Y});module.exports=ye(Te);var pe=require("@inertiajs/core");var k=require("@inertiajs/core"),u=require("vue");var L=require("@inertiajs/core"),z=_(require("lodash.clonedeep"),1),ve={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,t=L.router.restore(e),n=this.$options.remember.data.filter(o=>!(this[o]!==null&&typeof this[o]=="object"&&this[o].__rememberable===!1)),s=o=>this[o]!==null&&typeof this[o]=="object"&&typeof this[o].__remember=="function"&&typeof this[o].__restore=="function";n.forEach(o=>{this[o]!==void 0&&t!==void 0&&t[o]!==void 0&&(s(o)?this[o].__restore(t[o]):this[o]=t[o]),this.$watch(o,()=>{L.router.remember(n.reduce((a,l)=>({...a,[l]:(0,z.default)(s(l)?this[l].__remember():this[l])}),{}),e)},{immediate:!0,deep:!0})})}},G=ve;var O=require("@inertiajs/core"),F=_(require("lodash.clonedeep"),1),K=_(require("lodash.isequal"),1),E=require("vue");function w(e,t){let n=typeof e=="string"?e:null,s=(typeof e=="string"?t:e)??{},o=n?O.router.restore(n):null,a=typeof s=="function"?(0,F.default)(s()):(0,F.default)(s),l=null,m=null,d=r=>r,P=(0,E.reactive)({...o?o.data:(0,F.default)(a),isDirty:!1,errors:o?o.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(a).reduce((r,i)=>(r[i]=this[i],r),{})},transform(r){return d=r,this},defaults(r,i){if(typeof s=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof r>"u"?(a=this.data(),this.isDirty=!1):a=Object.assign({},(0,F.default)(a),typeof r=="string"?{[r]:i}:r),this},reset(...r){let i=typeof s=="function"?(0,F.default)(s()):(0,F.default)(a),g=(0,F.default)(i);return r.length===0?(a=g,Object.assign(this,i)):Object.keys(i).filter(c=>r.includes(c)).forEach(c=>{a[c]=g[c],this[c]=i[c]}),this},setError(r,i){return Object.assign(this.errors,typeof r=="string"?{[r]:i}:r),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...r){return this.errors=Object.keys(this.errors).reduce((i,g)=>({...i,...r.length>0&&!r.includes(g)?{[g]:this.errors[g]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(...r){let i=typeof r[0]=="object",g=i?r[0].method:r[0],c=i?r[0].url:r[1],p=(i?r[1]:r[2])??{},x=d(this.data()),$={...p,onCancelToken:f=>{if(l=f,p.onCancelToken)return p.onCancelToken(f)},onBefore:f=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(m),p.onBefore)return p.onBefore(f)},onStart:f=>{if(this.processing=!0,p.onStart)return p.onStart(f)},onProgress:f=>{if(this.progress=f,p.onProgress)return p.onProgress(f)},onSuccess:async f=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,m=setTimeout(()=>this.recentlySuccessful=!1,2e3);let V=p.onSuccess?await p.onSuccess(f):null;return a=(0,F.default)(this.data()),this.isDirty=!1,V},onError:f=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(f),p.onError)return p.onError(f)},onCancel:()=>{if(this.processing=!1,this.progress=null,p.onCancel)return p.onCancel()},onFinish:f=>{if(this.processing=!1,this.progress=null,l=null,p.onFinish)return p.onFinish(f)}};g==="delete"?O.router.delete(c,{...$,data:x}):O.router[g](c,x,$)},get(r,i){this.submit("get",r,i)},post(r,i){this.submit("post",r,i)},put(r,i){this.submit("put",r,i)},patch(r,i){this.submit("patch",r,i)},delete(r,i){this.submit("delete",r,i)},cancel(){l&&l.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(r){Object.assign(this,r.data),this.setError(r.errors)}});return(0,E.watch)(P,r=>{P.isDirty=!(0,K.default)(P.data(),a),n&&O.router.remember((0,F.default)(r.__remember()),n)},{immediate:!0,deep:!0}),P}var b=(0,u.ref)(null),v=(0,u.ref)(null),H=(0,u.shallowRef)(null),I=(0,u.ref)(null),B=null,be=(0,u.defineComponent)({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:t,resolveComponent:n,titleCallback:s,onHeadUpdate:o}){b.value=t?(0,u.markRaw)(t):null,v.value=e,I.value=null;let a=typeof window>"u";return B=(0,k.createHeadManager)(a,s,o),a||(k.router.init({initialPage:e,resolveComponent:n,swapComponent:async l=>{b.value=(0,u.markRaw)(l.component),v.value=l.page,I.value=l.preserveState?I.value:Date.now()}}),k.router.on("navigate",()=>B.forceUpdate())),()=>{if(b.value){b.value.inheritAttrs=!!b.value.inheritAttrs;let l=(0,u.h)(b.value,{...v.value.props,key:I.value});return H.value&&(b.value.layout=H.value,H.value=null),b.value.layout?typeof b.value.layout=="function"?b.value.layout(u.h,l):(Array.isArray(b.value.layout)?b.value.layout:[b.value.layout]).concat(l).reverse().reduce((m,d)=>(d.inheritAttrs=!!d.inheritAttrs,(0,u.h)(d,{...v.value.props},()=>m))):l}}}}),X=be,Z={install(e){k.router.form=w,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>k.router}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>v.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>B}),e.mixin(G)}};function ee(){return(0,u.reactive)({props:(0,u.computed)(()=>v.value?.props),url:(0,u.computed)(()=>v.value?.url),component:(0,u.computed)(()=>v.value?.component),version:(0,u.computed)(()=>v.value?.version),clearHistory:(0,u.computed)(()=>v.value?.clearHistory),deferredProps:(0,u.computed)(()=>v.value?.deferredProps),mergeProps:(0,u.computed)(()=>v.value?.mergeProps),rememberedState:(0,u.computed)(()=>v.value?.rememberedState),encryptHistory:(0,u.computed)(()=>v.value?.encryptHistory)})}var j=require("@inertiajs/core"),R=require("vue");async function q({id:e="app",resolve:t,setup:n,title:s,progress:o={},page:a,render:l}){let m=typeof window>"u",d=m?null:document.getElementById(e),P=a||JSON.parse(d.dataset.page),r=c=>Promise.resolve(t(c)).then(p=>p.default||p),i=[],g=await Promise.all([r(P.component),j.router.decryptHistory().catch(()=>{})]).then(([c])=>n({el:d,App:X,props:{initialPage:P,initialComponent:c,resolveComponent:r,titleCallback:s,onHeadUpdate:m?p=>i=p:null},plugin:Z}));if(!m&&o&&(0,j.setupProgress)(o),m){let c=await l((0,R.createSSRApp)({render:()=>(0,R.h)("div",{id:e,"data-page":JSON.stringify(P),innerHTML:g?l(g):""})}));return{head:i,body:c}}}var te=require("vue"),re=(0,te.defineComponent)({name:"Deferred",props:{data:{type:[String,Array],required:!0}},render(){let e=Array.isArray(this.$props.data)?this.$props.data:[this.$props.data];if(!this.$slots.fallback)throw new Error("`<Deferred>` requires a `<template #fallback>` slot");return e.every(t=>this.$page.props[t]!==void 0)?this.$slots.default():this.$slots.fallback()}});var oe=require("vue"),Pe=(0,oe.defineComponent)({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let t=Object.keys(e.props).reduce((n,s)=>{let o=e.props[s];return["key","head-key"].includes(s)?n:o===""?n+` ${s}`:n+` ${s}="${o}"`},"");return`<${e.type}${t}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((t,n)=>t+this.renderTag(n),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let t=this.renderTagStart(e);return e.children&&(t+=this.renderTagChildren(e)),this.isUnaryTag(e)||(t+=`</${e.type}>`),t},addTitleElement(e){return this.title&&!e.find(t=>t.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(t=>this.resolveNode(t)).map(t=>this.renderTag(t)).filter(t=>t))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(t=>this.resolveNode(t)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),ne=Pe;var T=require("@inertiajs/core"),h=require("vue"),Fe=(0,h.defineComponent)({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"},async:{type:Boolean,default:!1},prefetch:{type:[Boolean,String,Array],default:!1},cacheFor:{type:[Number,String,Array],default:0},onStart:{type:Function,default:e=>{}},onProgress:{type:Function,default:()=>{}},onFinish:{type:Function,default:()=>{}},onBefore:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onCancelToken:{type:Function,default:()=>{}}},setup(e,{slots:t,attrs:n}){let s=(0,h.ref)(0),o=(0,h.ref)(null),a=e.prefetch===!0?["hover"]:e.prefetch===!1?[]:Array.isArray(e.prefetch)?e.prefetch:[e.prefetch],l=e.cacheFor!==0?e.cacheFor:a.length===1&&a[0]==="click"?0:3e4;(0,h.onMounted)(()=>{a.includes("mount")&&x()}),(0,h.onUnmounted)(()=>{clearTimeout(o.value)});let m=typeof e.href=="object"?e.href.method:e.method.toLowerCase(),d=m!=="get"?"button":e.as.toLowerCase(),P=(0,h.computed)(()=>(0,T.mergeDataIntoQueryString)(m,typeof e.href=="object"?e.href.url:e.href||"",e.data,e.queryStringArrayFormat)),r=(0,h.computed)(()=>P.value[0]),i=(0,h.computed)(()=>P.value[1]),g=(0,h.computed)(()=>({a:{href:r.value},button:{type:"button"}})),c={data:i.value,method:m,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??m!=="get",only:e.only,except:e.except,headers:e.headers,async:e.async},p={...c,onCancelToken:e.onCancelToken,onBefore:e.onBefore,onStart:y=>{s.value++,e.onStart(y)},onProgress:e.onProgress,onFinish:y=>{s.value--,e.onFinish(y)},onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError},x=()=>{T.router.prefetch(r.value,c,{cacheFor:l})},$={onClick:y=>{(0,T.shouldIntercept)(y)&&(y.preventDefault(),T.router.visit(r.value,p))}},f={onMouseenter:()=>{o.value=setTimeout(()=>{x()},75)},onMouseleave:()=>{clearTimeout(o.value)},onClick:$.onClick},V={onMousedown:y=>{(0,T.shouldIntercept)(y)&&(y.preventDefault(),x())},onMouseup:y=>{y.preventDefault(),T.router.visit(r.value,p)},onClick:y=>{(0,T.shouldIntercept)(y)&&y.preventDefault()}};return()=>(0,h.h)(d,{...n,...g.value[d]||{},"data-loading":s.value>0?"":void 0,...a.includes("hover")?f:a.includes("click")?V:$},t)}}),se=Fe;var ie=require("@inertiajs/core"),M=require("vue");function U(e,t={},n={keepAlive:!1,autoStart:!0}){let{stop:s,start:o}=ie.router.poll(e,t,{...n,autoStart:!1});return(0,M.onMounted)(()=>{(n.autoStart??!0)&&o()}),(0,M.onUnmounted)(()=>{s()}),{stop:s,start:o}}var A=require("@inertiajs/core"),S=require("vue");function W(e={}){let t=(0,S.ref)(!1),n=(0,S.ref)(null),s=(0,S.ref)(!1),o=typeof window>"u"?null:A.router.getCached(window.location.pathname,e),a=typeof window>"u"?null:A.router.getPrefetching(window.location.pathname,e);n.value=o?.staleTimestamp||null,t.value=a!==null,s.value=o!==null;let l,m;return(0,S.onMounted)(()=>{m=A.router.on("prefetching",d=>{d.detail.visit.url.pathname===window.location.pathname&&(t.value=!0)}),l=A.router.on("prefetched",d=>{d.detail.visit.url.pathname===window.location.pathname&&(t.value=!1,s.value=!0)})}),(0,S.onUnmounted)(()=>{l(),m()}),{lastUpdatedAt:n,isPrefetching:t,isPrefetched:s,flush:()=>A.router.flush(window.location.pathname,e)}}var J=require("@inertiajs/core"),ae=_(require("lodash.clonedeep"),1),C=require("vue");function Y(e,t){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=J.router.restore(t),s=(0,C.isReactive)(e)?C.reactive:C.ref,o=typeof e.__remember=="function"&&typeof e.__restore=="function",a=s(n===void 0?e:o?e.__restore(n):n);return(0,C.watch)(a,l=>{J.router.remember((0,ae.default)(o?e.__remember():l),t)},{immediate:!0,deep:!0}),a}var le=require("@inertiajs/core"),N=require("vue"),ue=(0,N.defineComponent)({name:"WhenVisible",props:{data:{type:[String,Array]},params:{type:Object},buffer:{type:Number,default:0},as:{type:String,default:"div"},always:{type:Boolean,default:!1}},data(){return{loaded:!1,fetching:!1,observer:null}},unmounted(){this.observer?.disconnect()},mounted(){this.observer=new IntersectionObserver(e=>{if(!e[0].isIntersecting||(this.$props.always||this.observer.disconnect(),this.fetching))return;this.fetching=!0;let t=this.getReloadParams();le.router.reload({...t,onStart:n=>{this.fetching=!0,t.onStart?.(n)},onFinish:n=>{this.loaded=!0,this.fetching=!1,t.onFinish?.(n)}})},{rootMargin:`${this.$props.buffer}px`}),this.observer.observe(this.$el.nextSibling)},methods:{getReloadParams(){if(this.$props.data)return{only:Array.isArray(this.$props.data)?this.$props.data:[this.$props.data]};if(!this.$props.params)throw new Error("You must provide either a `data` or `params` prop.");return this.$props.params}},render(){let e=[];return(this.$props.always||!this.loaded)&&e.push((0,N.h)(this.$props.as)),this.loaded?this.$slots.default&&e.push(this.$slots.default()):e.push(this.$slots.fallback?this.$slots.fallback():null),e}});
//# sourceMappingURL=index.js.map
