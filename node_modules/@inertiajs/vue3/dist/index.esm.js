import{router as Xt}from"@inertiajs/core";import{createHeadManager as Z,router as A}from"@inertiajs/core";import{computed as P,defineComponent as ee,h as w,markRaw as V,reactive as te,ref as E,shallowRef as re}from"vue";import{router as M}from"@inertiajs/core";import Q from"lodash.clonedeep";var z={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,r=M.restore(e),n=this.$options.remember.data.filter(o=>!(this[o]!==null&&typeof this[o]=="object"&&this[o].__rememberable===!1)),i=o=>this[o]!==null&&typeof this[o]=="object"&&typeof this[o].__remember=="function"&&typeof this[o].__restore=="function";n.forEach(o=>{this[o]!==void 0&&r!==void 0&&r[o]!==void 0&&(i(o)?this[o].__restore(r[o]):this[o]=r[o]),this.$watch(o,()=>{M.remember(n.reduce((a,l)=>({...a,[l]:Q(i(l)?this[l].__remember():this[l])}),{}),e)},{immediate:!0,deep:!0})})}},N=z;import{router as C}from"@inertiajs/core";import b from"lodash.clonedeep";import G from"lodash.isequal";import{reactive as K,watch as X}from"vue";function k(e,r){let n=typeof e=="string"?e:null,i=(typeof e=="string"?r:e)??{},o=n?C.restore(n):null,a=typeof i=="function"?b(i()):b(i),l=null,f=null,m=t=>t,v=K({...o?o.data:b(a),isDirty:!1,errors:o?o.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(a).reduce((t,s)=>(t[s]=this[s],t),{})},transform(t){return m=t,this},defaults(t,s){if(typeof i=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof t>"u"?(a=this.data(),this.isDirty=!1):a=Object.assign({},b(a),typeof t=="string"?{[t]:s}:t),this},reset(...t){let s=typeof i=="function"?b(i()):b(a),d=b(s);return t.length===0?(a=d,Object.assign(this,s)):Object.keys(s).filter(p=>t.includes(p)).forEach(p=>{a[p]=d[p],this[p]=s[p]}),this},setError(t,s){return Object.assign(this.errors,typeof t=="string"?{[t]:s}:t),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...t){return this.errors=Object.keys(this.errors).reduce((s,d)=>({...s,...t.length>0&&!t.includes(d)?{[d]:this.errors[d]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(...t){let s=typeof t[0]=="object",d=s?t[0].method:t[0],p=s?t[0].url:t[1],u=(s?t[1]:t[2])??{},F=m(this.data()),T={...u,onCancelToken:c=>{if(l=c,u.onCancelToken)return u.onCancelToken(c)},onBefore:c=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(f),u.onBefore)return u.onBefore(c)},onStart:c=>{if(this.processing=!0,u.onStart)return u.onStart(c)},onProgress:c=>{if(this.progress=c,u.onProgress)return u.onProgress(c)},onSuccess:async c=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,f=setTimeout(()=>this.recentlySuccessful=!1,2e3);let O=u.onSuccess?await u.onSuccess(c):null;return a=b(this.data()),this.isDirty=!1,O},onError:c=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(c),u.onError)return u.onError(c)},onCancel:()=>{if(this.processing=!1,this.progress=null,u.onCancel)return u.onCancel()},onFinish:c=>{if(this.processing=!1,this.progress=null,l=null,u.onFinish)return u.onFinish(c)}};d==="delete"?C.delete(p,{...T,data:F}):C[d](p,F,T)},get(t,s){this.submit("get",t,s)},post(t,s){this.submit("post",t,s)},put(t,s){this.submit("put",t,s)},patch(t,s){this.submit("patch",t,s)},delete(t,s){this.submit("delete",t,s)},cancel(){l&&l.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(t){Object.assign(this,t.data),this.setError(t.errors)}});return X(v,t=>{v.isDirty=!G(v.data(),a),n&&C.remember(b(t.__remember()),n)},{immediate:!0,deep:!0}),v}var y=E(null),g=E(null),D=re(null),x=E(null),_=null,oe=ee({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:r,resolveComponent:n,titleCallback:i,onHeadUpdate:o}){y.value=r?V(r):null,g.value=e,x.value=null;let a=typeof window>"u";return _=Z(a,i,o),a||(A.init({initialPage:e,resolveComponent:n,swapComponent:async l=>{y.value=V(l.component),g.value=l.page,x.value=l.preserveState?x.value:Date.now()}}),A.on("navigate",()=>_.forceUpdate())),()=>{if(y.value){y.value.inheritAttrs=!!y.value.inheritAttrs;let l=w(y.value,{...g.value.props,key:x.value});return D.value&&(y.value.layout=D.value,D.value=null),y.value.layout?typeof y.value.layout=="function"?y.value.layout(w,l):(Array.isArray(y.value.layout)?y.value.layout:[y.value.layout]).concat(l).reverse().reduce((f,m)=>(m.inheritAttrs=!!m.inheritAttrs,w(m,{...g.value.props},()=>f))):l}}}}),L=oe,H={install(e){A.form=k,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>A}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>g.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>_}),e.mixin(N)}};function ne(){return te({props:P(()=>g.value?.props),url:P(()=>g.value?.url),component:P(()=>g.value?.component),version:P(()=>g.value?.version),clearHistory:P(()=>g.value?.clearHistory),deferredProps:P(()=>g.value?.deferredProps),mergeProps:P(()=>g.value?.mergeProps),rememberedState:P(()=>g.value?.rememberedState),encryptHistory:P(()=>g.value?.encryptHistory)})}import{router as se,setupProgress as ie}from"@inertiajs/core";import{createSSRApp as ae,h as le}from"vue";async function B({id:e="app",resolve:r,setup:n,title:i,progress:o={},page:a,render:l}){let f=typeof window>"u",m=f?null:document.getElementById(e),v=a||JSON.parse(m.dataset.page),t=p=>Promise.resolve(r(p)).then(u=>u.default||u),s=[],d=await Promise.all([t(v.component),se.decryptHistory().catch(()=>{})]).then(([p])=>n({el:m,App:L,props:{initialPage:v,initialComponent:p,resolveComponent:t,titleCallback:i,onHeadUpdate:f?u=>s=u:null},plugin:H}));if(!f&&o&&ie(o),f){let p=await l(ae({render:()=>le("div",{id:e,"data-page":JSON.stringify(v),innerHTML:d?l(d):""})}));return{head:s,body:p}}}import{defineComponent as ue}from"vue";var pe=ue({name:"Deferred",props:{data:{type:[String,Array],required:!0}},render(){let e=Array.isArray(this.$props.data)?this.$props.data:[this.$props.data];if(!this.$slots.fallback)throw new Error("`<Deferred>` requires a `<template #fallback>` slot");return e.every(r=>this.$page.props[r]!==void 0)?this.$slots.default():this.$slots.fallback()}});import{defineComponent as ce}from"vue";var fe=ce({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let r=Object.keys(e.props).reduce((n,i)=>{let o=e.props[i];return["key","head-key"].includes(i)?n:o===""?n+` ${i}`:n+` ${i}="${o}"`},"");return`<${e.type}${r}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((r,n)=>r+this.renderTag(n),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let r=this.renderTagStart(e);return e.children&&(r+=this.renderTagChildren(e)),this.isUnaryTag(e)||(r+=`</${e.type}>`),r},addTitleElement(e){return this.title&&!e.find(r=>r.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(r=>this.resolveNode(r)).map(r=>this.renderTag(r)).filter(r=>r))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(r=>this.resolveNode(r)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),me=fe;import{mergeDataIntoQueryString as de,router as I,shouldIntercept as j}from"@inertiajs/core";import{computed as $,defineComponent as he,h as ge,onMounted as ye,onUnmounted as ve,ref as q}from"vue";var be=he({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:String,required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"},async:{type:Boolean,default:!1},prefetch:{type:[Boolean,String,Array],default:!1},cacheFor:{type:[Number,String,Array],default:0},onStart:{type:Function,default:e=>{}},onProgress:{type:Function,default:()=>{}},onFinish:{type:Function,default:()=>{}},onBefore:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onCancelToken:{type:Function,default:()=>{}}},setup(e,{slots:r,attrs:n}){let i=q(0),o=q(null),a=e.prefetch===!0?["hover"]:e.prefetch===!1?[]:Array.isArray(e.prefetch)?e.prefetch:[e.prefetch],l=e.cacheFor!==0?e.cacheFor:a.length===1&&a[0]==="click"?0:3e4;ye(()=>{a.includes("mount")&&F()}),ve(()=>{clearTimeout(o.value)});let f=typeof e.href=="object"?e.href.method:e.method.toLowerCase(),m=f!=="get"?"button":e.as.toLowerCase(),v=$(()=>de(f,typeof e.href=="object"?e.href.url:e.href||"",e.data,e.queryStringArrayFormat)),t=$(()=>v.value[0]),s=$(()=>v.value[1]),d=$(()=>({a:{href:t.value},button:{type:"button"}})),p={data:s.value,method:f,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??f!=="get",only:e.only,except:e.except,headers:e.headers,async:e.async},u={...p,onCancelToken:e.onCancelToken,onBefore:e.onBefore,onStart:h=>{i.value++,e.onStart(h)},onProgress:e.onProgress,onFinish:h=>{i.value--,e.onFinish(h)},onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError},F=()=>{I.prefetch(t.value,p,{cacheFor:l})},T={onClick:h=>{j(h)&&(h.preventDefault(),I.visit(t.value,u))}},c={onMouseenter:()=>{o.value=setTimeout(()=>{F()},75)},onMouseleave:()=>{clearTimeout(o.value)},onClick:T.onClick},O={onMousedown:h=>{j(h)&&(h.preventDefault(),F())},onMouseup:h=>{h.preventDefault(),I.visit(t.value,u)},onClick:h=>{j(h)&&h.preventDefault()}};return()=>ge(m,{...n,...d.value[m]||{},"data-loading":i.value>0?"":void 0,...a.includes("hover")?c:a.includes("click")?O:T},r)}}),Pe=be;import{router as Fe}from"@inertiajs/core";import{onMounted as Te,onUnmounted as Se}from"vue";function U(e,r={},n={keepAlive:!1,autoStart:!0}){let{stop:i,start:o}=Fe.poll(e,r,{...n,autoStart:!1});return Te(()=>{(n.autoStart??!0)&&o()}),Se(()=>{i()}),{stop:i,start:o}}import{router as S}from"@inertiajs/core";import{onMounted as Ce,onUnmounted as ke,ref as R}from"vue";function W(e={}){let r=R(!1),n=R(null),i=R(!1),o=typeof window>"u"?null:S.getCached(window.location.pathname,e),a=typeof window>"u"?null:S.getPrefetching(window.location.pathname,e);n.value=o?.staleTimestamp||null,r.value=a!==null,i.value=o!==null;let l,f;return Ce(()=>{f=S.on("prefetching",m=>{m.detail.visit.url.pathname===window.location.pathname&&(r.value=!0)}),l=S.on("prefetched",m=>{m.detail.visit.url.pathname===window.location.pathname&&(r.value=!1,i.value=!0)})}),ke(()=>{l(),f()}),{lastUpdatedAt:n,isPrefetching:r,isPrefetched:i,flush:()=>S.flush(window.location.pathname,e)}}import{router as J}from"@inertiajs/core";import xe from"lodash.clonedeep";import{isReactive as Ae,reactive as $e,ref as Oe,watch as we}from"vue";function Y(e,r){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=J.restore(r),i=Ae(e)?$e:Oe,o=typeof e.__remember=="function"&&typeof e.__restore=="function",a=i(n===void 0?e:o?e.__restore(n):n);return we(a,l=>{J.remember(xe(o?e.__remember():l),r)},{immediate:!0,deep:!0}),a}import{router as De}from"@inertiajs/core";import{defineComponent as _e,h as Ee}from"vue";var Ie=_e({name:"WhenVisible",props:{data:{type:[String,Array]},params:{type:Object},buffer:{type:Number,default:0},as:{type:String,default:"div"},always:{type:Boolean,default:!1}},data(){return{loaded:!1,fetching:!1,observer:null}},unmounted(){this.observer?.disconnect()},mounted(){this.observer=new IntersectionObserver(e=>{if(!e[0].isIntersecting||(this.$props.always||this.observer.disconnect(),this.fetching))return;this.fetching=!0;let r=this.getReloadParams();De.reload({...r,onStart:n=>{this.fetching=!0,r.onStart?.(n)},onFinish:n=>{this.loaded=!0,this.fetching=!1,r.onFinish?.(n)}})},{rootMargin:`${this.$props.buffer}px`}),this.observer.observe(this.$el.nextSibling)},methods:{getReloadParams(){if(this.$props.data)return{only:Array.isArray(this.$props.data)?this.$props.data:[this.$props.data]};if(!this.$props.params)throw new Error("You must provide either a `data` or `params` prop.");return this.$props.params}},render(){let e=[];return(this.$props.always||!this.loaded)&&e.push(Ee(this.$props.as)),this.loaded?this.$slots.default&&e.push(this.$slots.default()):e.push(this.$slots.fallback?this.$slots.fallback():null),e}});export{pe as Deferred,me as Head,Pe as Link,Ie as WhenVisible,B as createInertiaApp,Xt as router,k as useForm,ne as usePage,U as usePoll,W as usePrefetch,Y as useRemember};
//# sourceMappingURL=index.esm.js.map
