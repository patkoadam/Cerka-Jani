import{f as o,o as l,b as s,g as T,F as u,r as v,h as _,v as g,t as h}from"./app-Cfo5MHDe.js";import{_ as p}from"./_plugin-vue_export-helper-DlAUqK2U.js";const f={data(){return{days:["Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat","Vasárnap"],timeSlots:[{time:"08:00",endTime:"08:40"},{time:"08:55",endTime:"09:35"},{time:"09:50",endTime:"10:30"},{time:"10:55",endTime:"11:35"},{time:"11:50",endTime:"12:30"},{time:"12:45",endTime:"13:25"},{time:"13:40",endTime:"14:20"},{time:"14:30",endTime:"15:10"},{time:"15:20",endTime:"16:00"},{time:"16:10",endTime:"16:50"},{time:"17:00",endTime:"17:40"},{time:"17:50",endTime:"18:30"},{time:"18:40",endTime:"19:20"}],events:[],newEventTitle:"",selectedDay:"",selectedTime:"",selectedEndTime:"",showModal:!1}},mounted(){fetch("http://localhost:8000/api/events").then(n=>n.json()).then(n=>{const t=["Vasárnap","Hétfő","Kedd","Szerda","Csütörtök","Péntek","Szombat"],i=n.map(r=>{const d=new Date(r.day).getDay(),e=t[d];console.log(e);const c=r.time?r.time.slice(0,5):"",m=r.end_time?r.end_time.slice(0,5):"";return{...r,day:e,time:c,endTime:m}});this.events=i}).catch(n=>console.error("Error fetching events:",n))},methods:{getDateForDay(n){const t={Hétfő:1,Kedd:2,Szerda:3,Csütörtök:4,Péntek:5,Szombat:6,Vasárnap:0};let i=new Date,r=t[n],a=i.getDay(),d=r-a,e=new Date(i);e.setDate(i.getDate()+d);let c=e.getFullYear(),m=String(e.getMonth()+1).padStart(2,"0"),y=String(e.getDate()).padStart(2,"0");return`${c}-${m}-${y}`},openModal(n,t,i){this.selectedDay=n,this.selectedTime=t,this.selectedEndTime=i,this.newEventTitle="",this.showModal=!0},closeModal(){this.showModal=!1},saveEvent(){if(!this.newEventTitle.trim())return;const n=this.getDateForDay(this.selectedDay),t={id:Date.now(),date:n,day:this.selectedDay,time:this.selectedTime,endTime:this.selectedEndTime,title:this.newEventTitle};this.events.push(t),fetch("http://localhost:8000/api/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(i=>i.json()).then(i=>{console.log("Event saved:",i)}).catch(i=>console.error("Error saving event:",i)),this.closeModal()},getEvents(n,t){return this.events.filter(i=>i.day===n&&i.time===t)},truncateText(n,t){return n.length>t?n.substring(0,t)+"...":n}}},k={class:"schedule-container"},D={class:"row"},E={class:"col-9"},b={class:"schedule-grid"},w={class:"time-column",style:{"margin-top":"auto"}},M={class:"days-column"},S=["onClick"],C=["title"],z={class:"col-3"},x={key:0,class:"events-list"},V={class:"event-card"},F={class:"event-time"},H={class:"event-title"},N={key:1},j={key:0,class:"modal-overlay"},P={class:"modal-box"},B={class:"modal-header"},K={class:"modal-body"},I={class:"modal-footer"};function O(n,t,i,r,a,d){return l(),o("div",k,[s("div",D,[s("div",E,[t[4]||(t[4]=s("h2",{class:"schedule-header"},"Heti időbeosztás",-1)),s("div",b,[s("div",w,[(l(!0),o(u,null,v(a.timeSlots,e=>(l(),o("div",{key:e.time,class:"time-slot"},h(e.time)+" - "+h(e.endTime),1))),128))]),s("div",M,[(l(!0),o(u,null,v(a.days,e=>(l(),o("div",{key:e,class:"day-column"},[s("h3",null,h(e),1),(l(!0),o(u,null,v(a.timeSlots,c=>(l(),o("div",{key:c.time,class:"hour-cell",onClick:m=>d.openModal(e,c.time,c.endTime)},[(l(!0),o(u,null,v(d.getEvents(e,c.time),m=>(l(),o("div",{key:m.id,class:"event-text",title:m.title},h(d.truncateText(m.title,10)),9,C))),128))],8,S))),128))]))),128))])])]),s("div",z,[t[5]||(t[5]=s("h2",{class:"schedule-header"},"Heti programok",-1)),a.events.length?(l(),o("div",x,[s("ul",null,[(l(!0),o(u,null,v(a.events,e=>(l(),o("li",{key:e.id,class:"event-item"},[s("div",V,[s("div",F,h(e.day)+" - "+h(e.time)+" - "+h(e.endTime),1),s("div",H,h(e.title),1)])]))),128))])])):(l(),o("p",N,"Nincsenek események."))])]),a.showModal?(l(),o("div",j,[s("div",P,[s("div",B,[t[6]||(t[6]=s("h5",{class:"modal-title"},"Új esemény hozzáadása",-1)),s("button",{class:"btn-close",onClick:t[0]||(t[0]=(...e)=>d.closeModal&&d.closeModal(...e))})]),s("div",K,[_(s("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.newEventTitle=e),type:"text",class:"form-control",placeholder:"Esemény címe"},null,512),[[g,a.newEventTitle]])]),s("div",I,[s("button",{class:"btn btn-secondary",onClick:t[2]||(t[2]=(...e)=>d.closeModal&&d.closeModal(...e))},"Mégse"),s("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=(...e)=>d.saveEvent&&d.saveEvent(...e))},"Mentés")])])])):T("",!0)])}const U=p(f,[["render",O],["__scopeId","data-v-8e7ee248"]]);export{U as default};
